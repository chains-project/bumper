1a2,45
> import org.apache.maven.project.MavenProjectBuilder;
> import org.apache.maven.repository.internal.DefaultArtifactDescriptorFactory;
> import org.codehaus.plexus.DefaultPlexusContainer;
> import org.codehaus.plexus.PlexusConstants;
> import org.codehaus.plexus.classworlds.realm.ClassRealm;import org.eclipse.aether.DefaultRepositorySystemSession;import org.eclipse.aether.RepositorySystem;import org.eclipse.aether.internal.impl.DefaultRepositorySystem;
> 
> // ...
> 
> private MavenProject createProject() {
>     // ...
> 
>     // Create a new MavenProjectBuilder
>     MavenProjectBuilder builder = new MavenProjectBuilder();
> 
>     // Create a new RepositorySystem
>     RepositorySystem repositorySystem = new DefaultRepositorySystem();
> 
>     // Create a new DefaultRepositorySystemSession
>     DefaultRepositorySystemSession session = new DefaultRepositorySystemSession();
> 
>     // Create a new DefaultArtifactDescriptorFactory
>     DefaultArtplexusContainer container = new DefaultPlexusContainer();
> 
>     // ...
> 
>     // Create a new ClassRealm
>     ClassRealm realm = (ClassRealm) container.getContainer()
>             .getComponent(PlexusConstants.plexus-classworlds-realm);
> 
>     // ...
> 
>     // Create a new MavenProject
>     MavenProject project = builder.buildFromRepository(
>             pom,
>             null,
>             repositorySystem,
>             session,
>             realm
>     );
> 
>     // ...
> 
>     return project;
> }
\ No newline at end of file
