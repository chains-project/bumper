2c2
<     public Policy<?> getPolicy(final PolicyConfig config) {
---
> public Policy<?> getPolicy(PolicyConfig config) {
5,12c5,10
<             return new YamlPolicy(
<                 new BlockingStorage(
<                     new Storages().newStorage(
<                         sub.string("type"), Yaml.createYamlInput(sub.toString()).readYamlMapping()
<                     )
<                 )
<             );
<         } catch (final IOException err) {
---
>         StoragesLoader storages = new StoragesLoader();
>         return new YamlPolicy(new BlockingStorage(storages.newObject(
>             sub.string("type"),
>             new YamlInput(sub.toString())
>         )));
>     } catch (IOException err) {
15a14,36
> 
> private static class YamlInput implements Config {
>     private final YamlMapping yaml;
> 
>     YamlInput(String yamlStr) {
>         this.yaml = Yaml.createYamlInput(yamlStr).readYamlMapping();
>     }
> 
>     @Override
>     public String string(String key) {
>         return yaml.string(key);
>     }
> 
>     @Override
>     public Config config(String key) {
>         return new YamlInput(yaml.string(key));
>     }
> 
>     @Override
>     public Set<String> keys() {
>         return yaml.keys();
>     }
> }
\ No newline at end of file
