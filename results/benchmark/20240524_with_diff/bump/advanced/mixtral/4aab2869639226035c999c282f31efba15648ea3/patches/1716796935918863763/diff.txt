0a1,4
> import com.artipie.asto.factory.StoragesLoader;
> import com.artipie.asto.fs.FileStorageFactory;
> import com.artipie.asto.s3.S3StorageFactory;
> 
5,11c9,18
<             return new YamlPolicy(
<                 new BlockingStorage(
<                     new Storages().newStorage(
<                         sub.string("type"), Yaml.createYamlInput(sub.toString()).readYamlMapping()
<                     )
<                 )
<             );
---
>         StoragesLoader storages = new StoragesLoader();
>         return new YamlPolicy(new BlockingStorage(storages.newObject(
>             sub.string("type"),
>             new StoragesLoader.Config() {
>                 @Override
>                 public String config() {
>                     return sub.toString();
>                 }
>             }
>         )));
