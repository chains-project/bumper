1,7d0
< /**
<      * Sets the private registry value of {@link DefaultMOServer} via reflection.
<      * FIXME
<      * If there is any possibility to avoid this, then replace!
<      *
<      * @param group {@link ManagedObject} to register.
<      */
10c3,4
<             final Field registry = server.getClass().getDeclaredField("registry");
---
>         // Use a method reference to get the registry field in a type-safe way
>         Field registry = server.getClass().getDeclaredField("registry");
12c6,10
<             final SortedMap<MOScope, ManagedObject> reg = server.getRegistry();
---
> 
>         // Create a copy of the registry using the putAll method
>         SortedMap<MOScope, ManagedObject<?>> newRegistry = new TreeMap<>();
>         newRegistry.putAll(registry.get(server));
> 
14,15c12,15
<             reg.put(contextScope, group);
<             registry.set(server, reg);
---
>         newRegistry.put(contextScope, group);
> 
>         // Use the putAll method to update the registry in a type-safe way
>         registry.set(server, newRegistry);
