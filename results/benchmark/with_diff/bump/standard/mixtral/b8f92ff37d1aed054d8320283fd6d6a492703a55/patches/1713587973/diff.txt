1,3c1,342
< static List<String> getClassesLoc(File testSrcFolder) {
<         DirectoryScanner directoryScanner = new DirectoryScanner(testSrcFolder, TestListResolver.getWildcard());
<         return directoryScanner.scan().getClasses();
---
> import org.apache.maven.plugin.surefire.booterclient.Commandline;
> import org.apache.maven.plugin.surefire.booterclient.DefaultForkConfiguration;
> import org.apache.maven.plugin.surefire.booterclient.lazytestprovider.LazyTestProviderFactory;
> import org.apache.maven.surefire.api.testset.TestRequest;
> import org.apache.maven.surefire.api.testset.TestSet;
> import org.apache.maven.surefire.booter.ForkConfiguration;
> import org.apache.maven.surefire.common.junit48.JUnit48Reflector;
> import org.apache.maven.surefire.junit4.JUnit4Provider;
> import org.apache.maven.surefire.report.ReportEntry;
> import org.apache.maven.surefire.report.ReporterFactory;
> import org.apache.maven.surefire.report.SimpleReportEntry;
> import org.apache.maven.surefire.testset.TestRequestFactory;
> import org.apache.maven.surefire.testset.TestSetFactory;
> import org.apache.maven.surefire.util.ReflectionUtils;
> import org.junit.internal.TextListener;
> import org.junit.runner.JUnitCore;
> import org.junit.runner.Result;
> import org.junit.runner.notification.Failure;
> 
> import java.io.File;
> import java.lang.reflect.Method;
> import java.util.ArrayList;
> import java.util.Collection;
> import java.util.Collections;
> import java.util.List;
> import java.util.concurrent.TimeUnit;
> 
> static java.util.List<java.lang.String> getClassesLoc(java.io.File testSrcFolder) {
>     ForkConfiguration forkedConfig = new DefaultForkConfiguration(testSrcFolder);
>     Commandline commandLine = forkedConfig.createCommandLine(new StartupConfiguration(), 1, testSrcFolder);
>     TestRequest testRequest = TestRequestFactory.createTestRequest(
>             TestSetFactory.createTestSet(testSrcFolder.getAbsolutePath()),
>             Collections.emptyList(),
>             Collections.emptyMap(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             true,
>             false,
>             false,
>             false,
>             false,
>             false,
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList(),
>             Collections.emptyList()
>     );
>     commandLine.addTestSet(testRequest);
>     LazyTestProviderFactory.INSTANCE.createLazyTestProvider(commandLine);
>     Result result = new JUnitCore().run(new JUnit4Provider(new TextListener(new SimpleReporter())));
>     List<String> classes = new ArrayList<>();
>     for (Failure failure : result.getFailures()) {
>         classes.add(ReflectionUtils.getClassName(failure.getDescription()));
>     }
>     return classes;
