3,9c3,28
<         PasswordEncoder passwordEncoder = new PasswordEncoder() {
<             private final TextEncryptor textEncryptor;
<             private final PasswordEncryptor passwordEncryptor;
< 
<             public PasswordEncoder(TextEncryptor textEncryptor, PasswordEncryptor passwordEncryptor) {
<                 this.textEncryptor = textEncryptor;
<                 this.passwordEncryptor = passwordEncryptor;
---
>     TextEncryptor textEncryptor = new TextEncryptor() {
>         @Override
>         public String encryptText(String text) {
>             return passwordEncoder.encodePassword(text, null);
>         }
> 
>         @Override
>         public boolean isTextEncrypted(String text) {
>             return true;
>         }
> 
>         @Override
>         public String decryptText(String encryptedText) {
>             return passwordEncoder.decryptPassword(encryptedText, null);
>         }
>     };
> 
>     PasswordEncryptor passwordEncryptor = new PasswordEncryptor() {
>         @Override
>         public String encryptPassword(String password) {
>             return passwordEncoder.encodePassword(password, null);
>         }
> 
>         @Override
>         public boolean checkPassword(String password, String encryptedPassword) {
>             return passwordEncoder.isPasswordValid(encryptedPassword, password, null);
10a30
>     };
11a32
>     return new PasswordEncoder() {
22,23d42
< 
<         return passwordEncoder;
