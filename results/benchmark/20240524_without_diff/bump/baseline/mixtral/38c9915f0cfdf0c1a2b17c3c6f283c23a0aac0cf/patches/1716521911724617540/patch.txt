import org.cactoos.scalar.LengthOf;

// ...

public RtTransaction(String hash, InputStream input, RtDb db) throws IOException {
  super(hash);
  this.input = Objects.requireNonNull(input);
  this.db = Objects.requireNonNull(db);
  this.len = new LengthOf(input); // replace LengthOf(new IterableInputStream(input)) with new LengthOf(input)
}