import org.codehaus.plexus.components.io.filewalker.FileVisitor;

// ...

@Override
protected void scanClasspath(List<String> classpathElements, FileVisitor fileVisitor) throws MojoExecutionException {
    DirectoryScanner scanner = new DirectoryScanner();
    scanner.setBasedir(basedir);
    scanner.setIncludes(new String[]{"**/*.class"});
    scanner.setCaseSensitive(true);
    scanner.setFollowSymlinks(true);

    scanner.addDefaultExcludes();

    String[] files = scanner.getIncludedFiles();
    for (String file : files) {
        File f = new File(basedir, file);
        fileVisitor.visit(f);
    }
}