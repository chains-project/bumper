4c4
<       // Use the TFlushingFastFramedTransport to be compatible with singer_thrift
---
>     // Use the TFramedTransport to be compatible with singer_thrift
7,9c7,10
<       framedTransport = new TFastFramedTransport(new TIOStreamTransport(os),
<           bufferCapacity);
<       protocol = new TBinaryProtocol(framedTransport);
---
>     TTransport transport = new TFramedTransport(new TIOStreamTransport(os), bufferCapacity);
>     TProtocolFactory protocolFactory = new TBinaryProtocol.Factory();
>     framedTransport = (TFramedTransport) transport;
>     protocol = protocolFactory.getProtocol(transport);
