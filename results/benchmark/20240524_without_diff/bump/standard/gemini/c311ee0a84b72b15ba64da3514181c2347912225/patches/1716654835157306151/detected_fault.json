{
    "py/object": "pipeline.types.detected_fault.DetectedFault",
    "identifier": 1122606666,
    "in_class_code": "/**\n * Integration test for {@link AstoBlobs}.\n *\n * @since 0.1\n * @checkstyle ClassDataAbstractionCouplingCheck (500 lines)\n */\nfinal class AstoBlobsITCase {\n    // TODO: review this AI generated patch!\n    final InMemoryStorage storage = new InMemoryStorage();\n\n    final AstoBlobs blobs = new AstoBlobs(storage, new DefaultLayout(), new RepoName.Simple(\"any\"));\n\n    final String digest = \"123\";\n\n    {\n        hamcrest.MatcherAssert.assertThat(\"Exception thrown\", throwable, new IsNot<>(new IsNull<>()));\n        hamcrest.MatcherAssert.assertThat(\"Exception is InvalidDigestException\", Throwables.getRootCause(throwable), new IsInstanceOf(InvalidDigestException.class));\n        MatcherAssert.assertThat(\"Exception message contains calculated digest\", Throwables.getRootCause(throwable).getMessage(), new StringContains(\"3a6eb0790f39ac87c94f3856b2dd2c5d110e6811602261a9a923d3bb23adc8b7\"));\n        MatcherAssert.assertThat(\"Exception message contains expected digest\", Throwables.getRootCause(throwable).getMessage(), new StringContains(digest));\n        return CompletableFuture.allOf();\n    }\n\n    {\n    }\n\n    @Test\n    void writeAndReadBlob() throws Exception {\n        final AstoBlobs blobs = new AstoBlobs(new InMemoryStorage(), new DefaultLayout(), new RepoName.Simple(\"test\"));\n        final byte[] bytes = new byte[]{ 0x5, 0x6, 0x7, 0x8 };\n        final Digest digest = blobs.put(new TrustedBlobSource(bytes)).toCompletableFuture().get().digest();\n        final byte[] read = Flowable.fromPublisher(blobs.blob(digest).toCompletableFuture().get().get().content().toCompletableFuture().get()).toList().blockingGet().get(0).array();\n        MatcherAssert.assertThat(read, Matchers.equalTo(bytes));\n    }\n}",
    "qualified_in_class_code": "/**\n * Integration test for {@link AstoBlobs}.\n *\n * @since 0.1\n * @checkstyle ClassDataAbstractionCouplingCheck (500 lines)\n */\nfinal class AstoBlobsITCase {\n    // TODO: review this AI generated patch!\n    final com.artipie.asto.memory.InMemoryStorage storage = new com.artipie.asto.memory.InMemoryStorage();\n\n    final com.artipie.docker.asto.AstoBlobs blobs = new com.artipie.docker.asto.AstoBlobs(storage, new com.artipie.docker.asto.DefaultLayout(), new com.artipie.docker.RepoName.Simple(\"any\"));\n\n    final java.lang.String digest = \"123\";\n\n    {\n        org.hamcrest.MatcherAssert.assertThat(\"Exception thrown\", throwable, new org.hamcrest.core.IsNot<>(new com.artipie.docker.asto.IsNull<>()));\n        org.hamcrest.MatcherAssert.assertThat(\"Exception is InvalidDigestException\", com.google.common.base.Throwables.getRootCause(throwable), new org.hamcrest.core.IsInstanceOf(com.artipie.docker.error.InvalidDigestException.class));\n        org.hamcrest.MatcherAssert.assertThat(\"Exception message contains calculated digest\", com.google.common.base.Throwables.getRootCause(throwable).getMessage(), new org.hamcrest.core.StringContains(\"3a6eb0790f39ac87c94f3856b2dd2c5d110e6811602261a9a923d3bb23adc8b7\"));\n        org.hamcrest.MatcherAssert.assertThat(\"Exception message contains expected digest\", com.google.common.base.Throwables.getRootCause(throwable).getMessage(), new org.hamcrest.core.StringContains(digest));\n        return java.util.concurrent.CompletableFuture.allOf();\n    }\n\n    {\n    }\n\n    @org.junit.jupiter.api.Test\n    void writeAndReadBlob() throws java.lang.Exception {\n        final com.artipie.docker.asto.AstoBlobs blobs = new com.artipie.docker.asto.AstoBlobs(new com.artipie.asto.memory.InMemoryStorage(), new com.artipie.docker.asto.DefaultLayout(), new com.artipie.docker.RepoName.Simple(\"test\"));\n        final byte[] bytes = new byte[]{ 0x5, 0x6, 0x7, 0x8 };\n        final com.artipie.docker.Digest digest = blobs.put(new com.artipie.docker.asto.TrustedBlobSource(bytes)).toCompletableFuture().get().digest();\n        final byte[] read = io.reactivex.Flowable.fromPublisher(blobs.blob(digest).toCompletableFuture().get().get().content().toCompletableFuture().get()).toList().blockingGet().get(0).array();\n        org.hamcrest.MatcherAssert.assertThat(read, org.hamcrest.Matchers.equalTo(bytes));\n    }\n}",
    "plausible_dependency_identifier": null,
    "error_info": {
        "py/object": "pipeline.types.error_info.ErrorInfo",
        "additional_info": "",
        "error_message": "[ERROR] /docker-adapter/src/test/java/com/artipie/docker/asto/AstoBlobsITCase.java:[78,15] class, interface, or enum expected",
        "client_file_path": "/docker-adapter/src/test/java/com/artipie/docker/asto/AstoBlobsITCase.java",
        "client_line_position": "78"
    },
    "client_end_line_number": 91,
    "client_line_number": 76,
    "method_code": "@Test\n    void writeAndReadBlob() throws Exception {\n        final AstoBlobs blobs = new AstoBlobs(\n            new InMemoryStorage(), new DefaultLayout(), new RepoName.Simple(\"test\")\n        );\n        final byte[] bytes = {0x05, 0x06, 0x07, 0x08};\n        final Digest digest = blobs.put(new TrustedBlobSource(bytes))\n            .toCompletableFuture().get().digest();\n        final byte[] read = Flowable.fromPublisher(\n            blobs.blob(digest)\n                .toCompletableFuture().get()\n                .get().content()\n                .toCompletableFuture().get()\n        ).toList().blockingGet().get(0).array();\n        MatcherAssert.assertThat(read, Matchers.equalTo(bytes));\n    }",
    "qualified_code": "@org.junit.jupiter.api.Test\nvoid writeAndReadBlob() throws java.lang.Exception {\n    final com.artipie.docker.asto.AstoBlobs blobs = new com.artipie.docker.asto.AstoBlobs(new com.artipie.asto.memory.InMemoryStorage(), new com.artipie.docker.asto.DefaultLayout(), new com.artipie.docker.RepoName.Simple(\"test\"));\n    final byte[] bytes = new byte[]{ 0x5, 0x6, 0x7, 0x8 };\n    final com.artipie.docker.Digest digest = blobs.put(new com.artipie.docker.asto.TrustedBlobSource(bytes)).toCompletableFuture().get().digest();\n    final byte[] read = io.reactivex.Flowable.fromPublisher(blobs.blob(digest).toCompletableFuture().get().get().content().toCompletableFuture().get()).toList().blockingGet().get(0).array();\n    org.hamcrest.MatcherAssert.assertThat(read, org.hamcrest.Matchers.equalTo(bytes));\n}",
    "method_name": "writeAndReadBlob"
}