1d0
< // TODO: review this AI generated patch!
3a3,4
>     java.net.Socket transportSocket = null;
>     org.apache.http.impl.nio.client.CloseableHttpAsyncClient httpClient = null;
6c7,11
<         transport = new org.apache.thrift.transport.TFramedTransport(new org.apache.thrift.transport.TSocket("localhost", 9090));
---
>         transportSocket = new java.net.Socket("localhost", 9093);
>         httpClient = org.apache.http.impl.nio.client.HttpAsyncClients.createDefault();
>         org.apache.http.nio.client.methods.HttpAsyncRequestProducer prod = new org.apache.http.nio.client.async.BasicRequestProducer(new org.apache.http.message.BasicHttpRequest("GET", "/open"), httpClient);
>         org.apache.http.nio.client.FutureUtils.wait(prod.send());
>         transport = new org.apache.thrift.transport.TFramedTransport(new org.apache.thrift.transport.TSocket(transportSocket));
9,10c14,15
<     } catch (org.apache.thrift.transport.TTransportException e) {
<         throw new RuntimeException(e);
---
>     } catch (java.io.IOException | org.apache.http.ExecutionException e) {
>         throw new java.lang.RuntimeException(e);
11a17,26
>     if (transportSocket != null) {
>         try {
>             transportSocket.close();
>         } catch (java.io.IOException ignored) {}
>     }
>     if (httpClient != null) {
>         try {
>             httpClient.close();
>         } catch (java.io.IOException ignored) {}
>     }
14d28
<         }
