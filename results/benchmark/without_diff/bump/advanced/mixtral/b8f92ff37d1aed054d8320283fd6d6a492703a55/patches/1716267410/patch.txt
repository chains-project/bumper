import org.apache.maven.shared.utils.StringUtils;

import java.io.File;
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Pattern;

static List<String> getClassesLoc(File testSrcFolder) {
    DirectoryScanner directoryScanner = new DirectoryScanner(testSrcFolder, StringUtils.patternMatcher("**/*.class"));
    return directoryScanner.scan().getIncludedFiles();
}

static class DirectoryScanner {
    private File baseDir;
    private Pattern pattern;

    DirectoryScanner(File baseDir, String pattern) {
        this.baseDir = baseDir;
        this.pattern = Pattern.compile(pattern);
    }

    List<String> scan() {
        List<String> result = new ArrayList<>();
        File[] files = baseDir.listFiles();
        if (files != null) {
            for (File file : files) {
                if (file.isDirectory()) {
                    DirectoryScanner subDirectoryScanner = new DirectoryScanner(file, pattern.pattern());
                    result.addAll(subDirectoryScanner.scan());
                } else if (pattern.matcher(file.getName()).matches()) {
                    result.add(file.getAbsolutePath());
                }
            }
        }
        return result;
    }

    List<String> getIncludedFiles() {
        return getFiles();
    }
}