import org.bouncycastle.tls.TlsContext;
import org.bouncycastle.tls.crypto.TlsCrypto;
import org.bouncycastle.util.Arrays;

import java.io.IOException;
import java.security.SecureRandom;

public class ChachaDecoder {
    // existing code

    @Override
    public byte[] decodeRecord(TlsContext context, byte[] record) throws IOException {
        TlsCrypto crypto = context.getCrypto();
        // existing code

        // Replace the failing line with the following:
        byte[] decodedRecord = crypto.decodeCiphertext(record);

        // existing code
    }

    // existing code
}