0a1,17
> import net.minecraft.server.MinecraftServer;
> import net.minecraft.server.dedicated.DedicatedServer;
> import net.minecraft.server.level.ServerPlayer;
> import net.minecraft.world.level.ServerLevel;
> import net.minecraft.world.level.phys.EmptyBlockPos;
> import org.bukkit.Bukkit;
> import org.bukkit.craftbukkit.v1_17_R1.CraftServer;
> import org.bukkit.craftbukkit.v1_17_R1.CraftWorld;
> import org.bukkit.craftbukkit.v1_17_R1.entity.CraftPlayer;
> import org.bukkit.entity.Player;
> 
> import java.util.UUID;
> import java.util.concurrent.ThreadLocalRandom;
> import java.util.function.Supplier;
> import java.util.properties.Properties;
> 
> public class PlayerUtils {
2c19
<      * ワールド内に新しいプレイヤーを捏造して、{@code EntityPlayer}として返します。
---
>      * ワールド内に新しいプレイヤーを生成して、{@code ServerPlayer}として返します。
5c22
<      * @return 創造されたプレイヤー。
---
>      * @return 生成されたプレイヤー。
7,9c24,26
<     public static EntityPlayer getRandomPlayer(World world)
<     {
<         Random random = new Random();
---
>     @SuppressWarnings("deprecation")
>     public static ServerPlayer getRandomPlayer(ServerLevel world) {
>         ThreadLocalRandom random = ThreadLocalRandom.current();
11c28
<             ? RandomStringUtils.randomAlphanumeric(new Random().nextInt(13) + 1)
---
>                 ? RandomStringUtils.randomAlphanumeric(random.nextInt(13) + 1)
14c31
<             ? RandomStringUtils.randomAlphanumeric(new Random().nextInt(13) + 1)
---
>                 ? RandomStringUtils.randomAlphanumeric(random.nextInt(13) + 1)
17,20c34,36
<         if (random.nextBoolean())
<         {
<             first = develop.p2p.lib.LeetConverter.convert(first);
<             last = develop.p2p.lib.LeetConverter.convert(last);
---
>         if (random.nextBoolean()) {
>             first = LeetConverter.convert(first);
>             last = LeetConverter.convert(last);
30c46
<         WorldServer worldServer = ((CraftWorld) world).getHandle();
---
>         ServerLevel level = ((CraftWorld) world).getHandle();
31a48
>         Supplier<Properties> skinSupplier = () -> {
32a50,56
>             Properties props = new Properties();
>             props.put("textures", new Properties() {{
>                 put("SKIN", skin.getLeft());
>                 put("SIG", skin.getRight());
>             }});
>             return props;
>         };
34c58,69
<         GameProfile profile = new GameProfile(UUID.randomUUID(), name);
---
>         UUID uuid = UUID.randomUUID();
>         ServerPlayer player = new ServerPlayer(
>                 ((CraftServer) Bukkit.getServer()).getServer(),
>                 level,
>                 new GameProfile(uuid, name),
>                 new PlayerInteractManager(level)
>         ) {
>             @Override
>             public Properties getSkinProperties() {
>                 return skinSupplier.get();
>             }
>         };
36c71,73
<         profile.getProperties().put("textures", new Property("textures", skin.getLeft(), skin.getRight()));
---
>         level.addFreshEntity(player);
>         return player;
>     }
38,43c75,78
<         return new EntityPlayer(
<             ((CraftServer) Bukkit.getServer()).getServer(),
<             worldServer,
<             profile,
<             new PlayerInteractManager(worldServer)
<         );
---
>     private static Pair<String, String> getRandomSkin() {
>         // Implementation not shown for brevity
>         throw new UnsupportedOperationException("getRandomSkin not implemented");
>     }
